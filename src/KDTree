from scipy import spatial
import numpy as np
"""
class GeographicalInfo :
    # Simple class that stores geographic data of a given place ID
    def __init__(self, lattitude, longitude, category, storeName) :
        self.lat = lattitude
        self.long = longitude
        self.category = category
        self.storeName = storeName
"""
        
def main():
    # parse command line options
    file = '/home/sarthakbhat/workspace/OptimalRetailStorePlacement/src/input/newyork_locdateDummy.txt'
    data = []
    geoDict = {}
    with open(file) as f:
        for line in f:
            geoDataArray = line.rstrip('\n').split(';')
            placeID = geoDataArray[0].rstrip('*')
            locData = geoDataArray[1].lstrip('*(').rstrip(')*').split(',')
            locTuple = (float(locData[0].strip()), float(locData[1].strip()))
                # Open the text file and load the latitude and longitude of place into data
            data.append(locTuple)
            # Load a dictionary with key as place ID and location info as value    
            geoDict[placeID] = locData
    #Create the KD Tree
    print data
    tree = spatial.KDTree(data)
    print 'dancer'
    for item in geoDict:
        sourceLatitude = float(geoDict[item][0].strip())
        sourceLongitude = float(geoDict[item][1].strip())
        print [data[i] for i in tree.query_ball_point([sourceLatitude, sourceLongitude], 0)]
if __name__ == "__main__":
    main()

